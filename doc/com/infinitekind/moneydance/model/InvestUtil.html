<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.1) on Thu Feb 07 17:55:48 GMT 2019 -->
<title>InvestUtil</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2019-02-07">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InvestUtil";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.infinitekind.moneydance.model</a></div>
<h2 title="Class InvestUtil" class="title">Class InvestUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.infinitekind.moneydance.model.InvestUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public abstract class <span class="typeNameLabel">InvestUtil</span>
extends java.lang.Object</pre>
<div class="block">Miscellaneous investment functions</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#UNREALIZED_MARKER">UNREALIZED_MARKER</a></span></code></th>
<td class="colLast">
<div class="block">Marker to identify special sale transactions that are used for unrealized gain calcs.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="CapitalGainBuy.html" title="class in com.infinitekind.moneydance.model">CapitalGainBuy</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildBuyTransactionList(com.infinitekind.moneydance.model.Account)">buildBuyTransactionList</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec)</code></th>
<td class="colLast">
<div class="block">Create a sorted map of date versus buy amount, which includes both cash purchases as
 well as reinvestments.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeROI(java.util.List,double)">computeROI</a></span>&#8203;(java.util.List&lt;<a href="ROICashFlowEntry.html" title="class in com.infinitekind.moneydance.model">ROICashFlowEntry</a>&gt;&nbsp;timeSeries,
          double&nbsp;seedPercent)</code></th>
<td class="colLast">
<div class="block">Compute the Return On Investment, or Internal Rate of Return, or Annual Return Percent.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateUnrealizedSaleTxn(com.infinitekind.moneydance.model.Account,long,int)">generateUnrealizedSaleTxn</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAcct,
                         long&nbsp;shares,
                         int&nbsp;asofDate)</code></th>
<td class="colLast">
<div class="block">Generate a sale transaction as if all remaining shares of a security were sold off as
 of a specific date.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateUnrealizedSaleTxn(com.infinitekind.moneydance.model.Account,java.util.Hashtable,int)">generateUnrealizedSaleTxn</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAcct,
                         java.util.Hashtable&lt;java.lang.String,&#8203;<a href="AvailableSharesTracker.html" title="class in com.infinitekind.moneydance.model">AvailableSharesTracker</a>&gt;&nbsp;lotsRemaining,
                         int&nbsp;asofDate)</code></th>
<td class="colLast">
<div class="block">Generate a sale transaction as if all remaining shares of a security were sold off as
 of a specific date.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="CapitalGainBuy.html" title="class in com.infinitekind.moneydance.model">CapitalGainBuy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBuyTracker(com.infinitekind.moneydance.model.Account,com.infinitekind.moneydance.model.CurrencyType,com.infinitekind.moneydance.model.CurrencyType,com.infinitekind.moneydance.model.SplitTxn)">getBuyTracker</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec,
             <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;secCurr,
             <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;investCurr,
             <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;split)</code></th>
<td class="colLast">
<div class="block">Generate a tracking class for a buy transaction when using average cost method.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCostBasis(com.infinitekind.moneydance.model.Account)">getCostBasis</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec)</code></th>
<td class="colLast">
<div class="block">Returns the current cost basis for the given security.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="CapitalGainResult.html" title="class in com.infinitekind.moneydance.model">CapitalGainResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCostBasisCapGain(com.infinitekind.moneydance.model.Account,java.util.List,com.infinitekind.moneydance.model.SplitTxn)">getCostBasisCapGain</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec,
                   java.util.List&lt;<a href="CapitalGainBuy.html" title="class in com.infinitekind.moneydance.model">CapitalGainBuy</a>&gt;&nbsp;buyTxns,
                   <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;sellTxn)</code></th>
<td class="colLast">
<div class="block">Returns the current cost basis for the shares in the given sell transaction in the given
 security.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCostPerShareValue(com.infinitekind.moneydance.model.Account,long,long)">getCostPerShareValue</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec,
                    long&nbsp;shares,
                    long&nbsp;cost)</code></th>
<td class="colLast">
<div class="block">Compute the cost per share, avoiding a divide by zero fault (returns zero if no shares).</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPerShareSalesNet(com.infinitekind.moneydance.model.AbstractTxn)">getPerShareSalesNet</a></span>&#8203;(<a href="AbstractTxn.html" title="class in com.infinitekind.moneydance.model">AbstractTxn</a>&nbsp;atxn)</code></th>
<td class="colLast">
<div class="block">Compute the net sale amount, in the currency of the parent investment account,
 of a sale transaction.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static java.util.Hashtable&lt;java.lang.String,&#8203;<a href="AvailableSharesTracker.html" title="class in com.infinitekind.moneydance.model">AvailableSharesTracker</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemainingLots(com.infinitekind.moneydance.model.AccountBook,com.infinitekind.moneydance.model.Account,int)">getRemainingLots</a></span>&#8203;(<a href="AccountBook.html" title="class in com.infinitekind.moneydance.model">AccountBook</a>&nbsp;book,
                <a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAcct,
                int&nbsp;unrealizedAsOfDate)</code></th>
<td class="colLast">
<div class="block">Determine the remaining lots in a lot-based security account, as of a specified date,
 accounting for all sales on or prior to that date.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSecurityBalanceInfo(com.infinitekind.moneydance.model.Account,long,int,com.infinitekind.moneydance.model.CurrencyType,char)">getSecurityBalanceInfo</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAccount,
                      long&nbsp;shares,
                      int&nbsp;asofDate,
                      <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;baseCurrency,
                      char&nbsp;decimal)</code></th>
<td class="colLast">
<div class="block">Get security balance detailed info on the shares and price per share.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isCostBasisValid(com.infinitekind.moneydance.model.Account)">isCostBasisValid</a></span>&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInvestmentIncome(com.infinitekind.moneydance.model.InvestTxnType)">isInvestmentIncome</a></span>&#8203;(<a href="InvestTxnType.html" title="enum in com.infinitekind.moneydance.model">InvestTxnType</a>&nbsp;txnType)</code></th>
<td class="colLast">
<div class="block">Determine if a transaction is an income from the fund or if it is a 'bank' transaction where
 the user is putting money in or taking money out.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isSaleTransaction(com.infinitekind.moneydance.model.InvestTxnType)">isSaleTransaction</a></span>&#8203;(<a href="InvestTxnType.html" title="enum in com.infinitekind.moneydance.model">InvestTxnType</a>&nbsp;txnType)</code></th>
<td class="colLast">
<div class="block">Determine if a transaction is a transaction that can be considered a sale, which is treated
 specially for capital gains.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isUserCashFlow(com.infinitekind.moneydance.model.InvestTxnType)">isUserCashFlow</a></span>&#8203;(<a href="InvestTxnType.html" title="enum in com.infinitekind.moneydance.model">InvestTxnType</a>&nbsp;txnType)</code></th>
<td class="colLast">
<div class="block">Determine if a transaction is a 'bank' transaction where the user is putting money in or
 taking money out.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processLotBasedTxn(com.infinitekind.moneydance.model.TxnSet,com.infinitekind.moneydance.model.SplitTxn,com.infinitekind.moneydance.model.CurrencyType,int,java.util.Hashtable)">processLotBasedTxn</a></span>&#8203;(<a href="TxnSet.html" title="class in com.infinitekind.moneydance.model">TxnSet</a>&nbsp;acctTxns,
                  <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;split,
                  <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;secCurr,
                  int&nbsp;unrealizedAsOfDate,
                  java.util.Hashtable&lt;java.lang.String,&#8203;<a href="AvailableSharesTracker.html" title="class in com.infinitekind.moneydance.model">AvailableSharesTracker</a>&gt;&nbsp;result)</code></th>
<td class="colLast">
<div class="block">Process a transaction for a security that uses lot-based cost.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recomputeStartDate(java.util.List,int)">recomputeStartDate</a></span>&#8203;(java.util.List&lt;<a href="ROICashFlowEntry.html" title="class in com.infinitekind.moneydance.model">ROICashFlowEntry</a>&gt;&nbsp;timeSeries,
                  int&nbsp;currentBeginDate)</code></th>
<td class="colLast">
<div class="block">The start date is the parameter that modifies the result of an ROI computation the most, since
 every cash flow is computed against the start date.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="UNREALIZED_MARKER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UNREALIZED_MARKER</h4>
<pre>public static final&nbsp;java.lang.String UNREALIZED_MARKER</pre>
<div class="block">Marker to identify special sale transactions that are used for unrealized gain calcs.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.infinitekind.moneydance.model.InvestUtil.UNREALIZED_MARKER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getCostBasisCapGain(com.infinitekind.moneydance.model.Account,java.util.List,com.infinitekind.moneydance.model.SplitTxn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCostBasisCapGain</h4>
<pre class="methodSignature">public static&nbsp;<a href="CapitalGainResult.html" title="class in com.infinitekind.moneydance.model">CapitalGainResult</a>&nbsp;getCostBasisCapGain&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec,
                                                    java.util.List&lt;<a href="CapitalGainBuy.html" title="class in com.infinitekind.moneydance.model">CapitalGainBuy</a>&gt;&nbsp;buyTxns,
                                                    <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;sellTxn)</pre>
<div class="block">Returns the current cost basis for the shares in the given sell transaction in the given
 security.  If the given sell transaction is null then the cost basis for outstanding shares
 in the given security account is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sec</code> - The security account.</dd>
<dd><code>buyTxns</code> - Ignored as of Moneydance 2018 build 1684</dd>
<dd><code>sellTxn</code> - The sale transaction to analyze.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The capital gain values for the sales transaction, including short term and long
         term portions. The return value will be in the parent investment account's currency.</dd>
</dl>
</li>
</ul>
<a id="getPerShareSalesNet(com.infinitekind.moneydance.model.AbstractTxn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPerShareSalesNet</h4>
<pre class="methodSignature">public static&nbsp;long&nbsp;getPerShareSalesNet&#8203;(<a href="AbstractTxn.html" title="class in com.infinitekind.moneydance.model">AbstractTxn</a>&nbsp;atxn)</pre>
<div class="block">Compute the net sale amount, in the currency of the parent investment account,
 of a sale transaction. Returns zero if not a sale transaction. Returns the 
 cash proceeds of the sale less any transaction fees or commission.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>atxn</code> - The transaction to compute with.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>If atxn is a sale transaction, the net proceeds of the sale. Otherwise
 returns zero.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>MD2011</dd>
</dl>
</li>
</ul>
<a id="getCostBasis(com.infinitekind.moneydance.model.Account)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCostBasis</h4>
<pre class="methodSignature">public static&nbsp;long&nbsp;getCostBasis&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec)</pre>
<div class="block">Returns the current cost basis for the given security.</div>
</li>
</ul>
<a id="buildBuyTransactionList(com.infinitekind.moneydance.model.Account)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildBuyTransactionList</h4>
<pre class="methodSignature">public static&nbsp;java.util.List&lt;<a href="CapitalGainBuy.html" title="class in com.infinitekind.moneydance.model">CapitalGainBuy</a>&gt;&nbsp;buildBuyTransactionList&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec)</pre>
<div class="block">Create a sorted map of date versus buy amount, which includes both cash purchases as
 well as reinvestments. This map can be used to determine whether a sale transaction
 represents long term capital gains, short term capital gains, or both.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sec</code> - the security account to build the list of transactions for.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A map of integer date versus the total amount of the buy transaction, including
 any fees or commissions.</dd>
</dl>
</li>
</ul>
<a id="getBuyTracker(com.infinitekind.moneydance.model.Account,com.infinitekind.moneydance.model.CurrencyType,com.infinitekind.moneydance.model.CurrencyType,com.infinitekind.moneydance.model.SplitTxn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBuyTracker</h4>
<pre class="methodSignature">public static&nbsp;<a href="CapitalGainBuy.html" title="class in com.infinitekind.moneydance.model">CapitalGainBuy</a>&nbsp;getBuyTracker&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec,
                                           <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;secCurr,
                                           <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;investCurr,
                                           <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;split)</pre>
<div class="block">Generate a tracking class for a buy transaction when using average cost method. This tracker
 is used to figure out which shares are sold first (FIFO) so that long term and short term
 capital gains can be computed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sec</code> - The security account for which the buy belongs.</dd>
<dd><code>secCurr</code> - The security account's currency (shares).</dd>
<dd><code>investCurr</code> - The parent investment account's currency (dollars, euro, etc.).</dd>
<dd><code>split</code> - The buy transaction.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A tracker class containing the cost basis of the buy transaction, including any
 transaction fees.</dd>
</dl>
</li>
</ul>
<a id="recomputeStartDate(java.util.List,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recomputeStartDate</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;recomputeStartDate&#8203;(java.util.List&lt;<a href="ROICashFlowEntry.html" title="class in com.infinitekind.moneydance.model">ROICashFlowEntry</a>&gt;&nbsp;timeSeries,
                                     int&nbsp;currentBeginDate)</pre>
<div class="block">The start date is the parameter that modifies the result of an ROI computation the most, since
 every cash flow is computed against the start date. There are times when you should recompute
 the start date because it is estimated too low, for example when the user picks 'All Dates' and
 the start date is set to 1970. This would make the ROI computation artificially low.
 
 By and large the start date is fixed by a specific date, so the time series will have already
 have the correct start date. For those situations where it doesn't, call this method prior to
 calling <a href="#computeROI(java.util.List,double)"><code>computeROI(java.util.List, double)</code></a>
 
 This method finds the first date in the time series, and compares it to the current start date.
 If the first date in the time series is at or before the current start date, use the current
 start date. If the first date in the time series is after the current, then it is used instead.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeSeries</code> - The time series to recompute the start date for, sorted in ascending
                        date order.</dd>
<dd><code>currentBeginDate</code> - The current starting date.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The new start date that was computed.</dd>
</dl>
</li>
</ul>
<a id="computeROI(java.util.List,double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeROI</h4>
<pre class="methodSignature">public static&nbsp;double&nbsp;computeROI&#8203;(java.util.List&lt;<a href="ROICashFlowEntry.html" title="class in com.infinitekind.moneydance.model">ROICashFlowEntry</a>&gt;&nbsp;timeSeries,
                                double&nbsp;seedPercent)</pre>
<div class="block">Compute the Return On Investment, or Internal Rate of Return, or Annual Return Percent.
 This method uses the Secant method to iteratively find the percent to 0.00001 accuracy,
 or 0.001%. This method will not iterate more than 100 times.
 
 The equation for secant iterative rate computation is:
 <pre>Rn+1 = Rn - NPVn*( (Rn - Rn-1) / (NPVn - NPVn-1)</pre>
 Where R is the rate and NPV is the net present value</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeSeries</code> - The time series of cash flows. This time series must include the initial
 balance as a positive and the ending balance as a negative value.</dd>
<dd><code>seedPercent</code> - The starting seed value to begin computations with.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The best estimate rate of return for the cash flow series. If the time series is
 not valid, returns <code>Double.NaN</code>.</dd>
</dl>
</li>
</ul>
<a id="getCostPerShareValue(com.infinitekind.moneydance.model.Account,long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCostPerShareValue</h4>
<pre class="methodSignature">public static&nbsp;double&nbsp;getCostPerShareValue&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec,
                                          long&nbsp;shares,
                                          long&nbsp;cost)</pre>
<div class="block">Compute the cost per share, avoiding a divide by zero fault (returns zero if no shares).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sec</code> - The security account the shares belong to.</dd>
<dd><code>shares</code> - The number of shares, in the security currency.</dd>
<dd><code>cost</code> - The total cost, in the parent investment account's currency.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The cost per share as a double precision floating point.</dd>
</dl>
</li>
</ul>
<a id="isCostBasisValid(com.infinitekind.moneydance.model.Account)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCostBasisValid</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isCostBasisValid&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;sec)</pre>
</li>
</ul>
<a id="getSecurityBalanceInfo(com.infinitekind.moneydance.model.Account,long,int,com.infinitekind.moneydance.model.CurrencyType,char)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSecurityBalanceInfo</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getSecurityBalanceInfo&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAccount,
                                                      long&nbsp;shares,
                                                      int&nbsp;asofDate,
                                                      <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;baseCurrency,
                                                      char&nbsp;decimal)</pre>
<div class="block">Get security balance detailed info on the shares and price per share.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>secAccount</code> - The security account.</dd>
<dd><code>shares</code> - The amount for the account (in shares)</dd>
<dd><code>asofDate</code> - The date to check the price for.</dd>
<dd><code>baseCurrency</code> - The base currency used to display the price.</dd>
<dd><code>decimal</code> - Decimal point for formatting.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The balance information shown as '[ {shares} @ {price} ]'</dd>
</dl>
</li>
</ul>
<a id="generateUnrealizedSaleTxn(com.infinitekind.moneydance.model.Account,long,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateUnrealizedSaleTxn</h4>
<pre class="methodSignature">public static&nbsp;<a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;generateUnrealizedSaleTxn&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAcct,
                                                 long&nbsp;shares,
                                                 int&nbsp;asofDate)</pre>
<div class="block">Generate a sale transaction as if all remaining shares of a security were sold off as
 of a specific date. This method should be used for securities using the average cost method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>secAcct</code> - The security account.</dd>
<dd><code>shares</code> - The share balance as of the given date.</dd>
<dd><code>asofDate</code> - The date to compute the hypothetical sale for.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A hypothetical sale of all remaining shares as of the given date.</dd>
</dl>
</li>
</ul>
<a id="generateUnrealizedSaleTxn(com.infinitekind.moneydance.model.Account,java.util.Hashtable,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateUnrealizedSaleTxn</h4>
<pre class="methodSignature">public static&nbsp;<a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;generateUnrealizedSaleTxn&#8203;(<a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAcct,
                                                 java.util.Hashtable&lt;java.lang.String,&#8203;<a href="AvailableSharesTracker.html" title="class in com.infinitekind.moneydance.model">AvailableSharesTracker</a>&gt;&nbsp;lotsRemaining,
                                                 int&nbsp;asofDate)</pre>
<div class="block">Generate a sale transaction as if all remaining shares of a security were sold off as
 of a specific date. This method should be used for securities using lot-based cost tracking.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>secAcct</code> - The security account.</dd>
<dd><code>lotsRemaining</code> - A list of the remaining lots to be sold, or <code>null</code> to use
                      average cost basis.</dd>
<dd><code>asofDate</code> - The date to compute the hypothetical sale for.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A hypothetical sale of all remaining shares as of the given date.</dd>
</dl>
</li>
</ul>
<a id="getRemainingLots(com.infinitekind.moneydance.model.AccountBook,com.infinitekind.moneydance.model.Account,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemainingLots</h4>
<pre class="methodSignature">public static&nbsp;java.util.Hashtable&lt;java.lang.String,&#8203;<a href="AvailableSharesTracker.html" title="class in com.infinitekind.moneydance.model">AvailableSharesTracker</a>&gt;&nbsp;getRemainingLots&#8203;(<a href="AccountBook.html" title="class in com.infinitekind.moneydance.model">AccountBook</a>&nbsp;book,
                                                                                                  <a href="Account.html" title="class in com.infinitekind.moneydance.model">Account</a>&nbsp;secAcct,
                                                                                                  int&nbsp;unrealizedAsOfDate)</pre>
<div class="block">Determine the remaining lots in a lot-based security account, as of a specified date,
 accounting for all sales on or prior to that date.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>book</code> - The data set that contains the transactions</dd>
<dd><code>secAcct</code> - The security to compute the remaining lots for.</dd>
<dd><code>unrealizedAsOfDate</code> - The date prior to which to get the unused lots.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A map of transaction ID (key) to number of shares remaining for that transaction
 (value) of all remaining (unsold) shares in the account as of that date. Will return
 <code>null</code> if the security account doesn't use lot-based accounting.</dd>
</dl>
</li>
</ul>
<a id="processLotBasedTxn(com.infinitekind.moneydance.model.TxnSet,com.infinitekind.moneydance.model.SplitTxn,com.infinitekind.moneydance.model.CurrencyType,int,java.util.Hashtable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processLotBasedTxn</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;processLotBasedTxn&#8203;(<a href="TxnSet.html" title="class in com.infinitekind.moneydance.model">TxnSet</a>&nbsp;acctTxns,
                                      <a href="SplitTxn.html" title="class in com.infinitekind.moneydance.model">SplitTxn</a>&nbsp;split,
                                      <a href="CurrencyType.html" title="class in com.infinitekind.moneydance.model">CurrencyType</a>&nbsp;secCurr,
                                      int&nbsp;unrealizedAsOfDate,
                                      java.util.Hashtable&lt;java.lang.String,&#8203;<a href="AvailableSharesTracker.html" title="class in com.infinitekind.moneydance.model">AvailableSharesTracker</a>&gt;&nbsp;result)</pre>
<div class="block">Process a transaction for a security that uses lot-based cost. For buys, the shares bought are
 added to the resulting available shares. For sales, the shares sold are removed from the
 respective lots, as they are no longer available. If a split had occurred, the available
 shares are adjusted accordingly.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>acctTxns</code> - The transactions for the account.</dd>
<dd><code>split</code> - The transaction to process.</dd>
<dd><code>secCurr</code> - The security currency.</dd>
<dd><code>unrealizedAsOfDate</code> - The date prior to which to get the unused/available lots.</dd>
<dd><code>result</code> - A map of transaction ID to number of shares available. This is an [in, out] 
 parameter as the map is modified by this method. The available shares will be correct as of
 the date of <code>split</code></dd>
</dl>
</li>
</ul>
<a id="isUserCashFlow(com.infinitekind.moneydance.model.InvestTxnType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUserCashFlow</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isUserCashFlow&#8203;(<a href="InvestTxnType.html" title="enum in com.infinitekind.moneydance.model">InvestTxnType</a>&nbsp;txnType)</pre>
<div class="block">Determine if a transaction is a 'bank' transaction where the user is putting money in or
 taking money out. For the purposes of this test, we need to know whether some bank account in
 the list of accounts will change in cash value. This includes the investment account cash
 value and any external accounts via transfers.
 
 Currently there is no ROI cash flow portion only for reinvested dividends/capital gains,
 because shares are added without changing the cash amount of the investment account. The shares
 will already be counted by the ROI computation in the ending balance for the time period.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnType</code> - The transaction type.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the transaction is one where the user is adding or subtracting money, false if
 the transaction is internal.</dd>
</dl>
</li>
</ul>
<a id="isInvestmentIncome(com.infinitekind.moneydance.model.InvestTxnType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInvestmentIncome</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isInvestmentIncome&#8203;(<a href="InvestTxnType.html" title="enum in com.infinitekind.moneydance.model">InvestTxnType</a>&nbsp;txnType)</pre>
<div class="block">Determine if a transaction is an income from the fund or if it is a 'bank' transaction where
 the user is putting money in or taking money out.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnType</code> - The transaction type.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the transaction is an income or expense transaction that represents an income
 from the security, false if it is some type of user-driven buy or sale transaction.</dd>
</dl>
</li>
</ul>
<a id="isSaleTransaction(com.infinitekind.moneydance.model.InvestTxnType)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isSaleTransaction</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isSaleTransaction&#8203;(<a href="InvestTxnType.html" title="enum in com.infinitekind.moneydance.model">InvestTxnType</a>&nbsp;txnType)</pre>
<div class="block">Determine if a transaction is a transaction that can be considered a sale, which is treated
 specially for capital gains.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnType</code> - The transaction type.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the transaction is a sale transaction, false otherwise..</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
